# @gusto/embedded-react-sdk - Internal README

To install dependencies:

```bash
npm install
```

To run:

```bash
npm run dev
```

## Local development

- Follow setup instructions for [Zenpayroll](https://github.com/Gusto/zenpayroll) and start local dev server
  - In another tab run the following commands in Zenpayroll directory(these generate necessary partner account for `gws-flows`) :
  ```
  bundle exec rails runner "DevAccountCreator.new.create_dev_accounts"
  rake partners_api:dev_setup_for_gws_onboarding
  ```
- Follow setup instructions in the readme for [GWS Flows](https://github.com/Gusto/gws-flows)
- Run `npm run dev`
- In GWS-Flows project folder, run `yarn link -r ../embedded-react-sdk`

Now your local changes appear in GWS Flows.

To see the SDK running in GWS Flows, visit it [locally](http://localhost:7777/demos?react_sdk=true) and choose `React SDK (New company)` or `React SDK (Company Onboarded)` under `Select a Type` and click `Create Demo`

Components and Flows will be shown at the top of the page in a `nav`. Company Components will automatically appear as they are added.
Select a Flow or Component to view it

## How to leverage Translations

Translations are stored in [/src/i18n](/src/i18n).

The are broken out by locale (e.g. `en`), then by namespace, which is usually the name of the component they are used in. The source of truth is the `en` locale - the rest will be autogenerated by translation service.

After writing the new translations, run `npm run interface` to generate the types.

In your components, first use `useI18n` hook, which takes in component namespace and loads appropriate resource file into dictionary. After that use the `useTranslation` hook to access the translations in that component and any child components.

## Testing locally

TBD

## Commits

All commits must follow `commitlint` enforced format: `type(scope?): subject  #scope is optional; multiple scopes are supported (current delimiter options: "/", "\" and ",")`
Following types are currently defined:

```
'build',
'chore',
'ci',
'docs',
'feat',
'fix',
'perf',
'refactor',
'revert',
'style',
'test'
```

## Documentation

TBD

## Cutting a new release

- Get your changes and a version increase in the package.json `version` field into the main branch however you want
- Run the `Publish to NPM` GitHub action [here](https://github.com/Gusto/embedded-react-sdk/actions/workflows/publish.yaml) by clicking `Run workflow`
